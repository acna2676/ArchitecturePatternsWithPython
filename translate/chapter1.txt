## What Is a Domain Model?
導入部では、ビジネス ロジック層という用語を使用して、3 層アーキテクチャの中心層を説明しました。本書の残りの部分では、代わりにドメイン モデルという用語を使用します。これは、DDD コミュニティの用語であり、私たちの意図した意味をより適切に捉えています (DDD の詳細については、次のサイドバーを参照してください)。
ドメインは、解決しようとしている問題を表現するための凝った言い方です。あなたの著者は現在、家具のオンライン小売業者で働いています。話しているシステムに応じて、ドメインは購買と調達、または製品設計、またはロジスティクスと配送である可能性があります.ほとんどのプログラマーは、ビジネス プロセスの改善または自動化に日々を費やしています。ドメインは、それらのプロセスがサポートするアクティビティのセットです。
モデルは、有用なプロパティをキャプチャするプロセスまたは現象のマップです。人間は、頭の中で物事のモデルを作成するのが非常に得意です。たとえば、誰かが自分に向かってボールを投げてきたとき、その動きをほとんど無意識に予測できます。これは、物体が空間内でどのように動くかのモデルがあるためです。あなたのモデルは決して完璧ではありません。私たちのモデルはこれらのケースをカバーするように設計されていないため、人間はオブジェクトが光速に近い速度または真空でどのように動作するかについてひどい直感を持っています.これは、モデルが間違っているという意味ではありませんが、一部の予測がその領域から外れていることを意味します.
ドメイン モデルは、ビジネス オーナーが自分のビジネスについて持っているメンタル マップです。すべてのビジネスパーソンは、これらのメンタルマップを持っています。これは、人間が複雑なプロセスについてどのように考えるかです。
彼らは商談を使用しているため、これらのマップをいつナビゲートしているかがわかります。専門用語は、複雑なシステムで共同作業を行っている人々の間で自然に発生します。
私たちの不幸な読者であるあなたが、友人や家族と一緒にエイリアンの宇宙船に乗って突然地球から数光年離れたところに運ばれ、第一原理から家に帰る方法を考え出さなければならなかったと想像してみてください.
最初の数日間は、ボタンをランダムに押すだけかもしれませんが、すぐにどのボタンが何をするかを学び、お互いに指示を与えることができます. 「点滅しているドゥーヒッキーの近くにある赤いボタンを押してから、その大きなレバーをレーダー ギズモのそばに投げてください」とあなたは言うかもしれません。
数週間以内に、船の機能を説明する言葉を採用するにつれて、より正確になります。数か月後、複雑なプロセス全体に「着陸シーケンスを開始」または「ワープの準備」という言語を採用することになります。このプロセスは、共有用語集を構築するための正式な努力がなくても、まったく自然に発生します。
ありふれたビジネスの世界でもそうです。ビジネス関係者が使用する用語は、複雑なアイデアやプロセスが 1 つの単語やフレーズに要約されるドメイン モデルの蒸留された理解を表しています。
ビジネスの利害関係者がなじみのない言葉を使用したり、特定の方法で用語を使用したりするのを聞いた場合、より深い意味を理解し、苦労して得た経験をソフトウェアにエンコードするために耳を傾ける必要があります。
この本では、実際のドメイン モデル、具体的には現在の職場のモデルを使用します。 MADE.com は成功した家具小売業者です。世界中のメーカーから家具を調達し、ヨーロッパ中で販売しています。
ソファやコーヒーテーブルを購入する場合、商品をポーランド、中国、ベトナムからリビングルームに届ける最善の方法を見つけなければなりません。
   
大まかに言えば、在庫の購入、顧客への在庫の販売、および顧客への商品の発送を担当する個別のシステムがあります。中間のシステムは、在庫を顧客の注文に割り当てることによってプロセスを調整する必要があります。図 1-2 を参照してください。

この本の目的のために、ビジネスが株式を割り当てるためのエキサイティングな新しい方法を実装することを決定したと想像しています。 これまで、企業は倉庫で物理的に入手可能なものに基づいて在庫とリードタイムを提示してきました。 倉庫が不足した場合、メーカーから次の出荷が到着するまで、製品は「在庫切れ」と表示されます。
これが革新です。すべての出荷を追跡し、いつ到着するかを追跡できるシステムがあれば、それらの船の商品を実際の在庫および在庫の一部として扱うことができますが、リードタイムはわずかに長くなります. 在庫切れのように見える商品が少なくなり、より多くの商品が販売され、国内の倉庫の在庫を少なくすることでビジネスはお金を節約できます.
しかし、注文の割り当ては、倉庫システムで単一の数量を減らすという簡単な問題ではなくなりました。 より複雑な割り当てメカニズムが必要です。 ドメイン モデリングの時間です。

## Exploring the Domain Language
ドメイン モデルを理解するには、時間と忍耐、そして付箋が必要です。 私たちはビジネスの専門家と最初の話し合いを行い、ドメイン モデルの最初の最小バージョンに関する用語集といくつかの規則について合意しました。 可能な限り、各ルールを説明する具体的な例を求めます。
これらのルールは、ビジネス用語 (DDD 用語のユビキタス言語) で表現するようにしています。 例が話しやすくなるように、オブジェクトには覚えやすい識別子を選択します。
「割り当てに関するメモ」では、割り当てについてドメインの専門家と話し合っているときに取ったメモを示します。

### 割り当てに関する注意事項
製品は、在庫管理単位の略である「スキュー」と発音される SKU によって識別されます。顧客が注文します。注文は注文参照によって識別され、複数の注文明細で構成され、各明細には SKU と数量が含まれます。例えば：
RED-CHAIR 10台
TASTELESS-LAMP 1台
購買部門は少量の在庫を注文します。在庫のバッチには、参照、SKU、および数量と呼ばれる一意の ID があります。
注文明細行をバッチに割り当てる必要があります。注文明細をバッチに割り当てると、その特定のバッチから顧客の配送先住所に在庫が送られます。 x単位の在庫をバッチに割り当てると、利用可能な数量はxだけ減少します。例えば：
20 個の SMALL-TABLE のバッチがあり、2 個の SMALL-TABLE に注文明細を割り当てます。
バッチには 18 個の SMALL-TABLE が残っているはずです。
利用可能な数量が注文明細の数量よりも少ない場合、バッチに割り当てることはできません。例えば：
1 つの BLUE-CUSHION のバッチと、2 つの BLUE-CUSHION の注文ラインがあります。明細をバッチに割り当てることはできません。
同じ行を 2 回割り当てることはできません。例えば：
10 個の BLUE-VASE のバッチがあり、2 個の BLUE-VASE の注文明細を割り当てます。注文明細行を同じバッチに再度割り当てた場合、バッチにはまだ 8 の使用可能な数量があるはずです。
バッチが現在出荷されている場合、または倉庫に在庫がある場合、バッチには ETA があります。出荷バッチよりも倉庫在庫に割り当てます。 ETAが早い順に出荷バッチを割り当てます。
